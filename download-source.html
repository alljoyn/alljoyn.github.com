<html>
  <head>
    <title>Download the AllJoyn&#8482; Source</title>
    <link type="text/css" rel="stylesheet" media="all" href="css/style.css">
  </head>
  <body>
    <div id="header">
      <div class="logo">
        <a href="index.html"><img src="img/logo.png" alt="AllJoyn Logo - "></a>
      </div> <!-- //.logo -->
    </div> <!-- //#header -->
    <div id="main">
      <h1>Download the AllJoyn&#8482; Source</h1>
      <p>The AllJoyn source is currently composed of multiple git
	repositories and is being managed using the
        <a href="http://source.android.com/source/git-repo.html"
	   target="_blank"> repo</a> tool. These instructions describe how
	use repo to download a copy of the AllJoyn source code in either
	a <a href="#Linux">Linux</a> or <a href="#Windows">Windows</a>
	environment. You can also
	<a href="http://github.com/alljoyn">browse the repositories
	  directly</a> if you choose, however we suggest using repo if you
	want to work with the code as that will ensure you get
	everything you need to <a href="build.html">build</a> it. To
	learn how to submit source changes to the AllJoyn OSP, please
	see the <a href="contribute.html">contribution instructions</a>,
	and read the <a href="http://www.alljoyn.org/contribute">AllJoyn.org
	  contribution guidelines</a>.

      <hr/>

      <h2><a id="Linux"></a>On Linux</h2>

      <h3>Login to a bash shell</h3>

      <h3>Make sure that Python and git are installed</h3>
      <p>We suggest that the Python version is 2.6 or greater and that the git
        version is 1.7 or greater. This can be checked as follows:</p>

      <span style="font-family:courier new;">
      <blockquote>
        $ python -V<br>
        $ git --version
      </blockquote></span>

      <p>If not, install or update them using your system pkg manager, or see
        your friendly sysadmin.</p>

      <h3>Make sure repo's shell script is installed and in your PATH</h3>
      <p>This can be done by issuing the repo command: </p>
      
      <blockquote>
      <span style="font-family:courier new;">
        <p>$ repo </p></span>
      </blockquote>
      
      <p>If you get an error then choose a location you can write to and
        which is in your <span style="font-family:courier new;">PATH</span>
        (e.g. <span style="font-family:courier new;">$HOME/bin</span>
        or <span style="font-family:courier new;">/usr/local/bin</span>),
        and install repo there as follows: </p>
      
      <span style="font-family:courier new;">
      <blockquote>
        <p> $ curl http://android.git.kernel.org/repo &gt; $HOME/bin/repo<br>
          $ chmod a+x $HOME/bin/repo
        </p>
      </blockquote></span>
      
      <h3>Download AllJoyn source into a new location</h3>
      <span style="font-family:courier new;">
      <blockquote>
        <p> $ mkdir $HOME/alljoyn # for example<br>
          $ cd $HOME/alljoyn<br>
	  $ repo init -u git://github.com/alljoyn/manifest.git<br>
          $ repo sync <br>
          $ repo start master --all
        </p>
      </blockquote></span>

      <h3>Update the AllJoyn source in that location at any time...</h3>
      <p>... by running <span style="font-family:courier new;">repo
      sync</span> again.</p>
      
      <hr>

      <h2><a id="Windows"></a>Using Cygwin on Windows</h2>
      <p>On Windows, we suggest using Cygwin 1.7. If you do not already
        have git and repo working in an existing Cygwin environment, we
        suggest installing a clean copy of Cygwin 1.7; even if you already
        have Cygwin installed. It will not hurt to install another copy of
        Cygwin in a different location to try out git and repo. Once they
        are working there, you can try installing them in your existing
        Cygwin environment. </p>
      
      <h3><a name="cygwim" id="cygwim"></a>Install Cygwin-1.7 </h3>
      <p>Run <a href="http://cygwin.com/setup.exe" target="_blank">Cygwin
          setup.exe</a> from <a href="http://cygwin.com/"
      target="_blank">cygwin.com</a>. Take the defaults
        except where noted below:</p>
      <ul type="disc">
        <li>Enter a new location for the root directory, like
	  <span style="font-family:courier new;">C:\AllJoyn\Cygwin\root
	</span> </li>
        <li>Enter a new location for package directory, like
	  <span style="font-family:courier new;">C:\AllJoyn\Cygwin\pkg
	</span></li>
        <li>Select Cygwin packages <span style="font-family:courier new;">git,
        python, curl,</span> and <span style="font-family:courier new;">
	rebase</span> for installation, in addition to the default packages.
	<strong>Don't forget to select your favorite editor!</strong></li>
        <li><strong>RECOMMENDED:</strong> un-check the boxes for Desktop
        and Start Menu shortcuts.</li>
      </ul>

      <h3><a name="shell" id="shell"></a>Install Repo's shell script</h3>
      <p>Open a bash shell window by
      double-clicking <span style="font-family:courier
      new;">C:\AllJoyn\Cygwin\root\Cygwin.bat</span> in Windows
      Explorer.</p>
      <p> Edit your .bash_profile and make the following changes (or
      similar):</p>

      <span style="font-family:courier new;">
      <blockquote>
        <p> 27,30c27,28
        <br>
        &lt; # Set PATH so it includes the user's private bin if it exists<br>
        &lt; # if [ -d &quot;${HOME}/bin&quot; ] ; then
        <br>
        &lt; # PATH=${HOME}/bin:${PATH}<br>
        &lt; # fi<br>
          ---<br>
        &gt; # Reset PATH so it includes user's private bin and excludes most Windows programs<br>
        &gt; PATH=&quot;${HOME}/bin:/usr/local/bin:/usr/bin:/bin:/cygdrive/c/Windows/system32:/cygdrive/c/Windows&quot;
        </p>
      </blockquote></span>
      
      
      <p>Create a private bin and install repo's shell script there:</p>
      <span style="font-family:courier new;">
      <blockquote>
        <p> $ mkdir $HOME/bin<br>
          $ curl http://android.git.kernel.org/repo &gt; $HOME/bin/repo<br>
          $ chmod a+x $HOME/bin/repo
        </p>
      </blockquote></span>
      
      
      <p><strong>Close (</strong><span style="font-family:courier
      new;">exit</span><strong>) this bash window before
      proceeding!</strong></p>

      <h3>Make sure that Python and git are installed</h3>
      <p>We suggest that the Python version is 2.6 or greater and that the
      git version is 1.7 or greater. This can be checked by opening a new
      bash shell window (by
      double-clicking <span style="font-family:courier
      new;">C:\AllJoyn\Cygwin\root\Cygwin.bat</span> in Windows Explorer)
      and typing:</p>
      
      <span style="font-family:courier new;">
      <blockquote>
        <p> $ python -V
          <br />
        $ git --version </p>
      </blockquote></span>
      
      <p>If those are not the installed versions or are missing,
      review <a href="#cygwin">Install Cygwin-1.7</a>.</p>

      <h3>Make sure repo's shell script is in your PATH</h3>
      <p>This can be done by typing: </p>
      
      <span style="font-family:courier new;">
      <blockquote>
        <p> $ repo </p>
      </blockquote></span>
      <p>If it is missing review <a href="#shell">Install Repo's shell
      script</a>.</p>
      
      <h3>Download AllJoyn into a new location</h3> 
      <span style="font-family:courier new;"><blockquote>
	<p> 
          $ mkdir $HOME/alljoyn # for example<br>
          $ cd $HOME/alljoyn<br>
          $ repo init -u git://github.com/alljoyn/manifest.git<br>
          $ repo sync <br>
          $ repo start master --all
        </p>
      </blockquote></span>
      
      <p>If repo init throws an error message such as the following,</p>
      
      <span style="font-family:courier new;">
      <p>1 main python 2016 C:\AllJoyn\Cygwin\root\bin\python.exe: ***
      fatal error - unable to remap
      \\?\C:\AllJoyn\Cygwin\root\lib\python2.6\lib-dynload\time.dll to same
      address as parent: 0x380000 != 0x410000 </p></span>
      <p>then you will have to <strong>rebase:</strong></p>
      <ul>
        <li>Close all open Cygwin bash shell windows</li>
        <li>Open a Windows CMD window, cd to bin under your Cygwin root
        directory, and run <strong>rebase all</strong>
        (using <strong>ash</strong>, not <strong>bash</strong>): </li>
      </ul>
      
      <span style="font-family:courier new;">
      <blockquote><p>
      > cd C:\AllJoyn\Cygwin\root\bin<br />
      > .\ash.exe<br />
      $ /bin/rebase all<br />
      $ exit </p>
      </blockquote></span>
      
      
      <ul>
        <li>Open a new bash shell window and re-try the above repo
        commands. You should not need to <strong>rebase</strong>
        again.</li>
      </ul>

      <h3>Update AllJoyn source in that location at any time...</h3>
      <p>... by running<span style="font-family:courier new;"> repo
      sync </span>again.</p>

      <h3>Remove temp/test Cygwin installation when finished</h3>
      <p><strong>OPTIONAL:</strong> If you installed an additional,
      temporary copy of Cygwin to test Git and Repo, you can remove it at
      any time by removing the Cygwin root and package directories created
      at installation (C:\AllJoyn\Cygwin\root and C:\AllJoyn\Cygwin\pkg in
      the above example). Close any bash shell windows and remove the
      directories from Windows Explorer. If you un-install Cygwin from
      Windows' <strong>Programs</strong> tool, it may affect your existing
      copy of Cygwin. </p>
      
      <hr>
      <h2>More on git and repo </h2>
      <p>We probably don&rsquo;t need to describe git here, but for the
      sake of completeness: git is an open-source version-control system
      designed to handle large, distributed software projects. The AllJoyn
      source code is maintained in five separate git repositories. We use
      git for local operations within individual git repositories, such as
      commits, diffs, and edits. </p>
      <blockquote>
        <p> git: <a href="http://git-scm.com/">http://git-scm.com/</a> </p>
      </blockquote>
      <p>Repo is an open-source tool built on top of git. The Android
      project uses repo to help manage the many git repositories that
      contain their source code. We use repo in much the same way. Repo is
      not meant to replace git, only to make git easier to work with for
      projects using multiple repositories. For example, with a single repo
      command you can download the source code from all five AllJoyn git
      repositories. </p>
      <blockquote>
        <p> repo: <a href="http://source.android.com/source/git-repo.html">
	    http://source.android.com/source/git-repo.html</a></p>
      </blockquote>
    </div>
  </body>
</html>
